{% extends "frbase.html" %}
{% block content %}
<h4 class="bd-title p-2 bg-secondary text-light">File Detail</h4>
<table class="table table-striped table-sm">
    <tr><th width="150">Name</th><td>{{ file.name|default_if_none:'' }}</td></tr>
    <tr><th>Count</th><td>{{ file.name|default_if_none:'' }}</td></tr>
</table>
<table class="table table-striped table-sm">
    <thead>
        <tr><td colspan="6">
        {{ page_obj.start_index }}-{{ page_obj.end_index }} out of {{ page_obj.paginator.count }} 
        </td><td colspan="6" align="right">
            <form method="GET" action="{% url 'freshwaterfish:file_detail' file.id%}">
                {% csrf_token %}
            <select name="region" id="region_select">
                <option value="">전체</option>
                {% for region in region_list %}
                <option value="{{region|default_if_none:''}}" {% if region == selected_region %}selected{%endif%}>{{region|default_if_none:''}}</option>
                {% endfor %}
            </select>
            <input type="text" size="30" name="filter1" value="{{filter1|default_if_none:''}}"/><button type="submit">검색</button>
                </form>
        </td></tr>
    </thead>
    {% if occ_list %}   
    <tbody>
        <tr>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'locality' %}-{%endif%}locality{%if filter1%}&filter1={{filter1}}{%endif%}">Locality{%if order_by == 'locality'%}&uarr;{%elif order_by == '-locality'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'country' %}-{%endif%}country{%if filter1%}&filter1={{filter1}}{%endif%}">Country{%if order_by == 'country'%}&uarr;{%elif order_by == '-country'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'clade' %}-{%endif%}clade{%if filter1%}&filter1={{filter1}}{%endif%}">Order/Clade{%if order_by == 'clade'%}&uarr;{%elif order_by == '-clade'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'family' %}-{%endif%}family{%if filter1%}&filter1={{filter1}}{%endif%}">Family{%if order_by == 'family'%}&uarr;{%elif order_by == '-family'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'genus' %}-{%endif%}genus{%if filter1%}&filter1={{filter1}}{%endif%}">Genus{%if order_by == 'genus'%}&uarr;{%elif order_by == '-genus'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'origin' %}-{%endif%}origin{%if filter1%}&filter1={{filter1}}{%endif%}">Origin{%if order_by == 'origin'%}&uarr;{%elif order_by == '-origin'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'epoch' %}-{%endif%}epoch{%if filter1%}&filter1={{filter1}}{%endif%}">Epoch{%if order_by == 'epoch'%}&uarr;{%elif order_by == '-epoch'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'age' %}-{%endif%}age{%if filter1%}&filter1={{filter1}}{%endif%}">Age{%if order_by == 'age'%}&uarr;{%elif order_by == '-age'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'environment' %}-{%endif%}environment{%if filter1%}&filter1={{filter1}}{%endif%}">Environment{%if order_by == 'environment'%}&uarr;{%elif order_by == '-environment'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'continent' %}-{%endif%}continent{%if filter1%}&filter1={{filter1}}{%endif%}">Continent{%if order_by == 'continent'%}&uarr;{%elif order_by == '-continent'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'period' %}-{%endif%}period{%if filter1%}&filter1={{filter1}}{%endif%}">Period{%if order_by == 'period'%}&uarr;{%elif order_by == '-period'%}&darr;{%endif%}</a></div></th>
            <th><div><a href="{% url 'freshwaterfish:occ_list' %}?order_by={% if order_by == 'reference' %}-{%endif%}reference{%if filter1%}&filter1={{filter1}}{%endif%}">Reference{%if order_by == 'reference'%}&uarr;{%elif order_by == '-reference'%}&darr;{%endif%}</a></div></th>
        </tr>
        {% for occ in page_obj %}
        <tr class="tr_link" style="cursor:pointer;" onclick="javascript:window.location='{% url 'freshwaterfish:occ_detail' occ.id %}';">
            <td>{{ occ.locality|default_if_none:'' }}</td>
            <td>{{ occ.country|default_if_none:'' }}</td>
            <td>{{ occ.clade|default_if_none:'' }}</td>
            <td>{{ occ.family|default_if_none:'' }}</td>
            <td><a href="{% url 'freshwaterfish:occ_detail' occ.id %}"><i>{{ occ.genus }}</i></a></td>
            <td>{{ occ.origin|default_if_none:'' }}</td>
            <td>{{ occ.epoch|default_if_none:'' }}</td>
            <td>{{ occ.age|default_if_none:'' }}</td>
            <td>{{ occ.environment|default_if_none:'' }}</td>
            <td>{{ occ.continent|default_if_none:'' }}</td>
            <td>{{ occ.period|default_if_none:'' }}</td>
            <td>{{ occ.reference|default_if_none:'' }}</td>
        </tr>
        {% endfor %}
    {% else %}
        <tr><td colspan="12">No occurrences are available.</td></tr>
    {% endif %}
    </tbody>
    <tfooter>
        <tr><td colspan="6" width="400">
            {% include "frpaginator.html" %}
        </td><td colspan="6" width="400" align="right">
            <a href="{% url 'freshwaterfish:occ_chart' file.id %}?filter1={{filter1|default_if_none:''}}{% if selected_region != '' %}&region={{selected_region|default_if_none:''}}{%endif%}">[Occurrence Chart]</a>
            <a href="{% url 'freshwaterfish:file_list' %}">[File List]</a>
        </td></tr>
    </tfooter>
</table>

{% endblock %}